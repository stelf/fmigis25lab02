# Схема на базата

вж [schema.mermaid.md]



# Задача 1: Анализ на осветлението на пътната мрежа

## Условие
Изчислете процента на пътища (`municipality_roads_api`), които са оборудвани с улично осветление (`ul_osvetlenie`), ако приемем, че едн ламап осветява област с радиус от 10 метра. 

Групирайте резултатите по категория на пътя и район. 

За всеки район и категория път определете:
1. Общата дължина на пътищата в километри
2. Дължината на осветените участъци в километри
3. Процент на осветеност
4. Качествена оценка на осветеността (лоша, средна, добра)


## Използвани таблици
- `municipality_roads_api` - информация за общинските пътища
  - `id`: уникален идентификатор
  - `geom`: геометрия на пътя (линия)
  - `road_categ`: категория на пътя
  - `road_name`: име на пътя

- `ul_osvetlenie` - информация за уличното осветление
  - `id`: уникален идентификатор
  - `geom`: геометрия на осветлението (точка)
  - `lighttype`: тип на осветлението
  - `condition`: състояние на осветлението (добро, лошо и т.н.)

- `adm_rayoni` - административно деление на районите
  - `id`: уникален идентификатор
  - `geom`: геометрия на района (полигон)
  - `obns_cyr`: име на района на кирилица

## Подсказки
- Използвайте `ST_Buffer` за създаване на буфер около осветителните тела
- Използвайте `ST_Intersection` за определяне на припокриването между пътя и буфера на осветлението
- Използвайте `ST_Length` за изчисляване на дължините
- Използвайте `ST_Centroid` и `ST_Intersects` за определяне на района, в който попада пътят
- Не забравяйте да филтрирате осветлението по състояние (само тези в добро състояние)
- Запазете геометрията на пътищата, за да можете да визуализирате резултатите в QGIS

## Свързващи колони
Няма директни връзки между таблиците в базата данни, затова трябва да използвате пространствени връзки:
- Между `municipality_roads_api` и `ul_osvetlenie`
- Между `municipality_roads_api` и `adm_rayoni`

## Очакван резултат
Таблица, съдържаща:
- Идентификатор на пътя
- Име на района
- Категория на пътя
- Име на пътя (ако е налично)
- Обща дължина в километри
- Осветена дължина в километри
- Процент на осветеност
- Качествена оценка на осветеността
- Геометрия на пътя за визуализация в QGIS

# Задача 2: Анализ на достъпността на спортни площадки около училищата

## Условие
Изчислете броя и видовете спортни площадки (`SPORTNI_PLOSHTADKI`), които се намират в радиус от 1 км от всяко училище (`POI_SCHOOLS`). За всяко училище определете:

1. Брой спортни площадки в рамките на 1 км
2. Типовете спортни площадки (като списък)
3. Име и идентификатор на училището

## Използвани таблици
- `POI_SCHOOLS` – информация за училищата
  - `id`: уникален идентификатор
  - `object_nam`: име на училището
  - `geom`: геометрия на училището (точка)

- `SPORTNI_PLOSHTADKI` – информация за спортните площадки
  - `id`: уникален идентификатор
  - `type`: тип на спортната площадка
  - `geom`: геометрия на площадката (точка или полигон)

## Подсказки
- Използвайте `ST_Buffer` за създаване на буфер с радиус 1000 метра около всяко училище.
- Използвайте `ST_Intersects` за намиране на спортните площадки, попадащи в този буфер.
- Използвайте `COUNT(DISTINCT ...)` за броя на площадките и `STRING_AGG(DISTINCT ...)` за текстово обобщение на типовете.
- Групирайте резултатите по училище.

## Свързващи колони
Няма директни връзки между таблиците – използвайте пространствени връзки между буфера на училището и геометрията на спортната площадка.

## Очакван резултат
Таблица, съдържаща:
- Идентификатор на училището
- Име на училището
- Брой спортни площадки в радиус 1 км
- Типове спортни площадки (като списък)



